{{ define "main" }}

<div class="w-80 mt2 pa2">
    <h2>Chapter Info</h2>
    <table>
        <tbody>
            <tr>
                <td>{{ .Params.chapter_numeral }}</td>
                <td>{{ .Params.title }}</td>
            </tr>
            <tr>
                <td>Quote</td>
                <td>{{ .Params.quote }}</td>
            </tr>
        </tbody>
    </table>
</div>


<div class="chapter-wrapper tsize-4">
    <table class="page-wrapper"><tr><td>
      <table class="panel-grid cols-2">
        <tr>
          <td class="black w-26"><div></div></td>
          <td class="yellow"><div></div></td>
        </tr>
      </table>
    </td></tr></table>

{{ range .Params.pages }}
    {{ $page := . }}
    <table class="page-wrapper"><tr><td>
      <table class="panel-grid {{if .has_splash}}double{{end}}
      {{if eq (int $page.col_layout) 3 }}cols-3{{ else }}cols-4{{ end }}">
        {{ range .panels }}
        {{with .}}
        <tr>
          {{ range . }}
          {{ $is_double := false }}
          {{ if and (eq .cols $page.col_layout) (gt .rows 1) }}{{ $is_double = true}}{{end}}
          <td {{ if and (.rows) (not $is_double) }}rowspan="{{.rows}}" {{ end }}
          {{ if .cols }}colspan="{{.cols}}"{{ end }}
          class="{{ .color }}{{if $is_double}} double{{end}} {{if (not .cols)}}{{if (eq (int $page.col_layout) 3) }}w-32{{ else }}w-24{{ end }}{{end}}"><div></div></td>
          {{ end }}
        </tr>
        {{ end }}
        {{ end }}
      </table>
    </td></tr></table>
{{ end }}
</div>
{{ end }}
