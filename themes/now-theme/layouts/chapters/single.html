{{ define "main" }}

  <div class="w-90 pa3 mr2">
    <div class="w-90 pa3 mr2">
    {{- partial "chapter-nav-bar.html" .Params.chapter_num -}}
    </div>

    <h2>Chapter Info</h2>
    <table>
        <tbody>
            <tr>
                <td>{{ .Params.chapter_numeral }}</td>
                <td>{{ .Params.title }}</td>
            </tr>
            <tr>
                <td>Quote</td>
                <td>{{ .Params.quote }}</td>
            </tr>
            <tr>
                <td>Pages</td>
                <td>{{ .Params.total_pages }}</td>
            </tr>
            <tr>
                <td>Doomsday Clock</td>
                <td>{{ .Params.doomsday_clock }}</td>
            </tr>
          </tbody>
      </table>

      <h2>Characters</h2>
      <table><tbody>
      {{ range sort .Params.characters "total" "desc" }}
        <tr>
            <td class="v-top">{{ .name }}</td>
            <td class="v-top">Appears in {{ .total }} panels</td>
            <td class="v-top">
            {{ with .appears_with }}
            Appears with:<br>
            <ul>
                {{ range $name, $val := . }}
                <li>{{$name}} in {{$val}} panels</li>
                {{ end }}
            </ul>
            {{ end }}
            </td>
        </tr>
      {{ end }}
        </tbody>
    </table>

</div>


<div class="w-50 pa3 mr2">
<canvas id="characters"></canvas>
{{ partial "js-characters-chart.html" (dict "context" $ "page" .) }}
</div>

<div class="w-90 pa3 mr2">
<h2>Panels</h2>
{{ partial "panel-color-buttons.html" }}
  
<div class="chapter-wrapper tsize-4">
{{ range .Params.pages }}
  {{ partial "page-panels.html" (dict "this" .) }}
{{ end }}
</div>
</div>

{{ partial "js-page-panel-colors.html" (dict "context" $) }}

</div>
{{ end }}
