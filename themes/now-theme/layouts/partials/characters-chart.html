<script>
var characters = {{ .page.Params.characters | jsonify | safeJS }};
var colors = {{ .context.Site.Data.colors.map | jsonify | safeJS }};

</script>

<script>
var ctx = document.getElementById('characters');
var chart_data = {data : [], labels : [], backgroundColor : []};

characters.sort((a,b)=>b['total']-a['total']).forEach(function (chr) {
  var hex = colors[chr['primary_color']];
  chart_data.data.push(chr['total']);
  chart_data.labels.push(chr['hero_name']);
  chart_data.backgroundColor.push(hex);
});

window.charts.characters(ctx, chart_data);

</script>
